#!/usr/bin/env node
process.env.METALSMITH_ENV = 'development'

var dir = process.cwd()
var ms = require('../lib/index')
var log = require('../lib/log').log
var fatal = require('../lib/log').fatal
var chalk = require('chalk')
var connect = require('connect')
var program = require('commander')
var debounce = require('debounce')
var chokidar = require('chokidar')
var serveIndex = require('serve-index')
var serveStatic = require('serve-static')
var livereloader = require('../lib/livereloader')
var Runner = require('../lib/runner')

program
  .version(require('../package.json').version)
  .option('-p, --port <port>', 'specify the port [3000]', Number, 3000)
  .option('-R, --no-livereload', 'disable livereload')
  .parse(process.argv)

try {
  var r = new Runner(dir, program)
  console.log(r)
  r.start()
} catch (e) {
  fatal(e.message)
}
