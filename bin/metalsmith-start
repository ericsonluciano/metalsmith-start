#!/usr/bin/env node
require('gnode')

process.env.METALSMITH_ENV = 'development'

var dir = process.cwd()
var Runner = require('../lib/runner')
var program = require('commander')
var fatal = require('../lib/log').fatal

program
  .version(require('../package.json').version)
  .option('-p, --port <port>', 'specify the port [3000]', Number, 3000)
  .option('-R, --no-livereload', 'disable livereload')
  .parse(process.argv)

try {
  var r = new Runner(dir, program)
  r.start(function () {})
} catch (e) {
  fatal(e.message)
}
